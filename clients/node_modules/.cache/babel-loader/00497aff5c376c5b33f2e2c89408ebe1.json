{"ast":null,"code":"var _jsxFileName = \"/home/firemort/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Fullstack/back-front/idashchenk/clients/src/components/pages/PostComponents/GetComment.js\",\n    _s = $RefreshSig$();\n\nimport moment from \"moment\";\nimport React, { createElement, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { DeletComment, getComments, UpdateComment } from \"../../../action/PostAction\";\nimport style from '../../style/PostPage.module.css';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CommentsForPost = props => {\n  _s();\n\n  let [comment, setComment] = useState('');\n  let [index, setIndex] = useState(0);\n  const auth = useSelector(state => state.Auth);\n  const token = auth.token;\n  console.log(token);\n  const {\n    post_id,\n    comments\n  } = props;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getComments(post_id));\n  }, [dispatch]);\n\n  if (comments === undefined) {\n    comments = [];\n  }\n\n  if (comments.length === 0) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"No Comments yet\"\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: comments.map(cmnt => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.Comment,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: style.Commentlogin,\n          children: cmnt.login\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: style.Commentcontent,\n          children: cmnt.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            if (index === 0) {\n              setIndex(1);\n            } else if (index === 1) {\n              dispatch(UpdateComment(cmnt.id, post_id, comment));\n            }\n\n            console.log(index);\n          },\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 21\n        }, this), index === 1 ? /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"How u wanna edit comment\",\n          value: comment,\n          onChange: e => setComment(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 36\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            dispatch(DeletComment(cmnt.id, post_id));\n          },\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: style.Commenttime,\n          children: moment(cmnt.time).fromNow()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, this)]\n      }, cmnt.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 17\n      }, this))\n    }, void 0, false);\n  }\n};\n\n_s(CommentsForPost, \"tuf05I/WijhBI6SPz8WdlHl14Fs=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = CommentsForPost;\nexport default CommentsForPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentsForPost\");","map":{"version":3,"names":["moment","React","createElement","useEffect","useState","useDispatch","useSelector","DeletComment","getComments","UpdateComment","style","CommentsForPost","props","comment","setComment","index","setIndex","auth","state","Auth","token","console","log","post_id","comments","dispatch","undefined","length","map","cmnt","Comment","Commentlogin","login","Commentcontent","content","id","e","target","value","Commenttime","time","fromNow"],"sources":["/home/firemort/Рабочий стол/Fullstack/back-front/idashchenk/clients/src/components/pages/PostComponents/GetComment.js"],"sourcesContent":["import moment from \"moment\";\nimport React, { createElement, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { DeletComment, getComments, UpdateComment } from \"../../../action/PostAction\";\n\nimport style from '../../style/PostPage.module.css'\n\nconst CommentsForPost = (props) => {\n    let [comment, setComment] = useState('')\n    let [index, setIndex] = useState(0)\n    const auth = useSelector(state=>state.Auth)\n    const token = auth.token\n    console.log(token);\n    const {post_id,comments} = props\n    const dispatch = useDispatch()\n    useEffect ( () => {\n        dispatch(getComments(post_id))\n    }, [dispatch])\n    if (comments === undefined) {\n        comments = []\n    }\n    if (comments.length === 0) {\n        return (\n            <>No Comments yet</>\n        )\n    }\n    else {\n        return (\n            <>\n            {comments.map( (cmnt) => \n                <div key={cmnt.id} className={style.Comment}>\n                    <p className={style.Commentlogin}>{cmnt.login}</p>\n                    <p className={style.Commentcontent}>{cmnt.content}</p>\n                    <button onClick= { () => {\n                        if (index === 0) {\n                            setIndex(1)\n                        }\n                        else if (index === 1) {\n                            dispatch(UpdateComment(cmnt.id,post_id, comment))\n                        }\n                        console.log(index);\n                    }}>Edit</button>\n                    {index === 1 ? <input type='text' placeholder=\"How u wanna edit comment\" value={comment} onChange={e=>setComment(e.target.value)}/> :<></>}\n                    <button onClick={() => {\n                        dispatch(DeletComment(cmnt.id,post_id))\n                    }}>Delete</button>\n                    <p className={style.Commenttime}>{moment(cmnt.time).fromNow()}</p>\n                </div>\n            )}\n            </>\n        )\n    }\n}\n\nexport default  CommentsForPost"],"mappings":"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"},"metadata":{},"sourceType":"module"}