{"ast":null,"code":"import { createCommentsOnPost, createlike, deletelike, getCommentsOnPost, getLikesFromPost, getPost, PostByid } from \"../api/PostApi\";\nexport const getPosts = () => async dispatch => {\n  try {\n    const {\n      data\n    } = await getPost;\n    return dispatch({\n      type: 'getposts',\n      payload: data\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const GetLikes = id => async dispatch => {\n  try {\n    const Data = await createlike(id);\n    const {\n      data\n    } = await getLikesFromPost(id);\n\n    if (Data.data.result.affectedRows > 0) {\n      dispatch({\n        type: 'like',\n        payload: false\n      });\n    }\n\n    return dispatch({\n      type: 'getlikes',\n      payload: data.result\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const getPostById = id => async dispatch => {\n  try {\n    const {\n      data\n    } = await PostByid(id);\n    return dispatch({\n      type: \"getpostbyid\",\n      payload: data.result\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const getComments = id => async dispatch => {\n  try {\n    const {\n      data\n    } = await getCommentsOnPost(id);\n    return dispatch({\n      type: 'getCommentsOnPost',\n      payload: data.result\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const createComment = (id, comment) => async dispatch => {\n  try {\n    const {\n      data\n    } = await createCommentsOnPost(id, comment);\n    console.log(data);\n    const Data = await getCommentsOnPost(id);\n    let comments; //vse kommentu\n\n    if (data.result.affectedRows > 0) {\n      comments = Data.data.result;\n      console.log(comments);\n      let comment = comments[comments.length - 1];\n      console.log(comment);\n      return dispatch({\n        type: 'createcommentforpost',\n        payload: comment\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const likePost = id => async dispatch => {\n  try {\n    const {\n      data\n    } = await createlike(id);\n    const Data = await getLikesFromPost(id);\n    let likes;\n\n    if (data.result.affectedRows > 0) {\n      likes = Data.data.result;\n      let like = likes[likes.length - 1];\n      dispatch({\n        type: 'like',\n        payload: true\n      });\n      dispatch({\n        type: \"likepost\",\n        payload: like\n      });\n    }\n  } catch (error) {}\n};\nexport const deleteLikeFromPost = id => async dispatch => {\n  try {\n    const {\n      data\n    } = await deletelike(id);\n    const Data = await getLikesFromPost(id);\n\n    if (data.result.affectedRows > 0) {\n      let likes = Data.data.result;\n      let like = [];\n\n      for (let index = 0; index < likes.length; index++) {\n        if (data.user === likes[index].user_id) {\n          console.log(\"Jopa\");\n          index = index + 1;\n        }\n\n        like[index] = likes[index];\n      }\n\n      console.log(like);\n      dispatch({\n        type: 'deletelike',\n        payload: like\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"names":["createCommentsOnPost","createlike","deletelike","getCommentsOnPost","getLikesFromPost","getPost","PostByid","getPosts","dispatch","data","type","payload","error","console","log","GetLikes","id","Data","result","affectedRows","getPostById","getComments","createComment","comment","comments","length","likePost","likes","like","deleteLikeFromPost","index","user","user_id"],"sources":["/home/firemort/Рабочий стол/Fullstack/back-front/idashchenk/clients/src/action/PostAction.js"],"sourcesContent":["import { createCommentsOnPost, createlike, deletelike, getCommentsOnPost, getLikesFromPost, getPost, PostByid } from \"../api/PostApi\"\n\n\nexport const getPosts = () => async(dispatch) => {\n    try {\n        const {data}= await getPost\n        return dispatch({type:'getposts', payload:data})\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport const GetLikes = (id) => async(dispatch) => {\n    try {\n        const Data = await createlike(id)\n        const {data} = await getLikesFromPost(id)\n        if (Data.data.result.affectedRows>0) {\n            dispatch({type:'like',payload:false})\n        }\n        return dispatch({type:'getlikes', payload:data.result})\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport const getPostById = (id) => async(dispatch) => {\n    try {\n        const {data} = await PostByid(id)\n        return dispatch({type:\"getpostbyid\", payload:data.result})\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport const getComments = (id) => async(dispatch) => {\n    try {\n        const {data} = await getCommentsOnPost(id)\n        return dispatch({type:'getCommentsOnPost', payload:data.result})\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport const createComment = (id, comment) => async(dispatch) => {\n    try {\n        const {data} = await createCommentsOnPost(id,comment)\n        console.log(data);\n        const Data = await getCommentsOnPost(id)\n        let comments //vse kommentu\n        if (data.result.affectedRows > 0) {\n            comments = Data.data.result\n            console.log(comments);\n            let comment = comments[comments.length-1]\n            console.log(comment);\n            return dispatch({type:'createcommentforpost', payload:comment})\n        }\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport const likePost = (id) => async(dispatch) => {\n    try {\n        const {data} = await createlike(id)\n        const Data = await getLikesFromPost(id)\n        let likes\n        if (data.result.affectedRows > 0) {\n            likes = Data.data.result\n            let like = likes[likes.length-1]\n            dispatch({type:'like',payload:true})\n            dispatch({type:\"likepost\", payload:like})\n        }\n    } catch (error) {\n\n    }\n}\n\n\n\nexport const deleteLikeFromPost = (id) => async(dispatch) => {\n    try {\n        const {data} = await deletelike(id)\n        const Data = await getLikesFromPost(id)\n        if (data.result.affectedRows>0) {\n            let likes = Data.data.result\n            let like = []\n            for (let index = 0; index < likes.length; index++) {\n                if (data.user === likes[index].user_id) {\n                    console.log(\"Jopa\");\n                    index = index+1\n                }\n                like[index] = likes[index]\n            }\n            console.log(like);\n            dispatch({type:'deletelike', payload:like})\n        }\n    } catch (error) {\n        console.log(error);\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}